## **数据备份与恢复**

#### **归档模式**

> 重做日志文件（redo Logfile)：事务日志文件，记录数据库数据的变化，通过重做日志可以恢复数据
>
> ~~~sql
> -- 查看重做日志位置
> select * from v$logfile;
> ~~~
>
> 归档日志：当重做日志被写满时候，对重做日志转存，用于数据恢复
>
> ~~~sql
> -- 查看归档状态
> archive log list;
> -- 启动归档模式
> shutdown immediate;
> startup mount;
> alter database archivelog;
> alter database open;
> -- 查看归档日志位置
> show PARAMETER db_recover_file_dest;
> -- 设置归档日志位置
> alter system set log_archive_dest_1 = 'path';
> ~~~

#### **dmms_datapump**：高速导入导出数据库数据文件（数据泵）

> ~~~Sql
> declare 
>  h1 number;
> begin
>  -- job_mode：schema：用户名  table：表
>  h1:=dbms_datapump.open(operation=>'export',job_mode=>'schema');
>  -- 导出的用户名
>  dbms_datapump.metadata_filter(handle=>h1,name=>'SCHEMA_EXPR',value=>'in (''system')')';
>  -- 导出的数据文件和目录对象
>  dbms_datapump.add_file(h1,'socctt.dmp','path');
>  dbms_datapump.start_job(h1);
>  dbms_datapump.detach(h1);
> ~~~
>
> 
