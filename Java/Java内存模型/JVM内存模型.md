## JVM内存模型

> ![image-20220529220649691](img\image-20220529220649691.png)
>
> - **运行时数据区**
>
>   > *java程序执行过程中把内存分为若干个不同的数据区域*
>   >
>   > - 程序计数器：记录所有线程状态（类似于进程控制块PCB）
>   >
>   > - 虚拟机栈：Java方法执行内存模型，方法执行时创建栈帧（**方法内局部变量表**，动态链接，方法出口信息）入栈，方法执行完返回出栈。*局部变量表包含基本数据类型，和引用数据类型*
>   >
>   >   > <img src="img/image-20220623103325854.png" alt="image-20220623103325854" style="zoom:50%;" /> 
>   >
>   > - 本地方法栈：与虚拟机栈类似，保存的是本地方法栈帧
>   >
>   > - 堆：存放所有对象实例，垃圾回收器作用区域
>   >
>   >   > -XMs（堆初始容量）  -Xmx （堆最大容量）
>   >   >
>   >   > 新生代 （1/3） -Xmn 
>   >   >
>   >   > - Eden  （4/5）  GC后存活的对象移入From区
>   >   > - From  （1/10）  From与To Survivor 使用复制交换方式清理内存
>   >   > - To Survivor （1/10）
>   >   >
>   >   > 老年代 （2/3） 
>   >
>   > - 方法区（Method Area）元空间区：存储已被虚拟机加载的类信息，常量，静态变量
>   >
>   >   > JDK8 使用元工具代替方法区，相对方法区，元空间存放在系统内存中
>   >   >
>   >   > 运行时常量池：存放编译时期生成的字面量和符号应用
>
> - **对象的创建**
>
>   > **堆内存分配**
>   >
>   > - 指针碰撞分配：**连续使用堆内存**下使用指针标记未使用内存开始地址，开辟空间时移动指针
>   >
>   > - 空闲列表分配：**非连续使用堆内存**使用空闲表记录为使用内存的地址
>   >
>   > **对象的内存布局**
>   >
>   > - 