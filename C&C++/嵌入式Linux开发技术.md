## 嵌入式开发技术

- #### **嵌入式基础**

> 嵌入式处理器：
>
> - 微控制器（MCU，单片机）
> - 微处理器（CPU，需要外接其他芯片来完成系统功能）
> - DSP：数字信号处理器
> - GPU：图形处理器
> - Soc：片上系统（包含一个或多个高性能处理器核心）
>
> **嵌入式系统**：
>
> 1. **单片机（MCU）**：采用RTOS系统或裸机程序执行
>
> 2. **嵌入式Linux**
>
>    | 特性       | 单片机                           | 嵌入式Linux                      |
>    | ---------- | -------------------------------- | -------------------------------- |
>    | 处理器     | 单核，资源受限                   | 多核可选，资源相对丰富           |
>    | 操作系统   | 无或简单的RTOS                   | 完整的Linux操作系统              |
>    | 内存/存储  | 几KB到几MB                       | 几MB到几GB                       |
>    | 处理能力   | 低                               | 高                               |
>    | 实时性     | 高                               | 相对较低 (可通过实时扩展提高)    |
>    | 功耗       | 低                               | 相对较高                         |
>    | 应用场景   | 简单控制，传感器节点，低功耗设备 | 复杂应用，网络设备，图形界面应用 |
>    | 开发复杂度 | 低                               | 高                               |
>    | 成本       | 低                               | 高                               |
>    | 编程语言   | 主要C语言                        | C、C++、Python等多种语言         |
>
> **指令集**：
>
> 1. **x86/x64:** 应用于高性能计算，服务器，PC
> 2. **ARM:** 移动设备、嵌入式系统，服务器，可穿戴设备
> 3. **RISC-V**：物联网，嵌入式系统
> 4. **PowerPC**：嵌入式系统，
> 5. **MIPS:** 应用于嵌入式系统的指令集架构。
>
> 基于ARM指令的CPU架构
>
> - **Cortex系列：** Arm 公司研发的Cortex系列处理器架构
>
>   - **Cortex-M**：针对微控制器应用，强调低功耗、成本效益和实时性能（传感器，物联网）
>
>   - **Cortex-R**：针对实时应用，强调高性能和确定性（汽车，工业控制）
>
>   - **Cortex-A**：针对应用处理器，强调高性能和多功能性（手机，平板，电脑）
>
>     C/C++语言编译过程：
>
> - 源码（`.c .h .cpp .cc .cxx .inl .tpp`)
>
> - 编译/汇编/链接器（`.s .o .exe .a`）：GCC，Clang/LLVM，MSVC
>

#### **基于Linux的文件系统**

> 操作系统概念
>
> 1. 临界区：代码执行中同一时间只允许一个进程进入执行的代码区域
> 2. 共享/独享资源
> 3. 任务切换与调度
> 4. 可重入性：代码或函数允许多个进程调用（需要维护资源安全）
> 5. 时钟节拍
>
> [Linux内核](https://www.kernel.org/doc/html/latest/translations/zh_CN/index.html)及系统结构
>
> - 内核层（控制和管理硬件与软件资源）
> - Shell层（用户交互页面）
> - 应用层
>
> **Linux文件系统**
>
> - VFS（虚拟文件系统）：操作系统内核中的一个软件层，负责将用户程序对文件的操作请求转换成对具体文件系统的操作，从而屏蔽不同文件系统之间的差异，为用户提供统一的文件访问接口
>   1. SuperBlock：已挂载的文件系统
>   2. inode：一个文件或目录，包含文件的元数据
>   3. dentry：代表目录中的一个条目与inode关联
>   4. file object：代表一个打开的文件，包含文件指针
> - 常规系统文件
>   1. ext3/ext4：单文件支持 16 TiB，支持日志功能
>   2. XFS：用于大型服务器和存储系统（适合大容量数据存储）
>   3. NTFS/APFS：不开源
> - 基于Flash文件系统
>   1. F2FS
>   2. UBIFD：专为嵌入式设备和NAND 闪存设计
>   3. JFFS2：支持嵌入式 Linux 系统
>   4. EXFAT
> - 基于RAM文件系统
>   1. tmpfs：内存文件系统
>   2. ramfs
> - 网络文件系统：NFS
>
> **Linux模块机制**：允许动态地向运行的内核添加或删除代码，而无需重新编译或重启系统
>
> ~~~c
> #include <linux/module.h>      // 需要的模块头文件
> #include <linux/kernel.h>      // printk() 函数需要的头文件
> #include <linux/init.h>        // 用于宏 INIT 和 EXIT
> 
> // 模块加载时的函数
> static int __init hello_init(void)
> {
>     printk(KERN_INFO "HelloModule: Module loaded.\n");
>     return 0; // 成功加载模块
> }
> 
> // 模块卸载时的函数
> static void __exit hello_exit(void)
> {
>     printk(KERN_INFO "HelloModule: Module unloaded.\n");
> }
> 
> // 注册模块的加载和卸载函数
> module_init(hello_init);    // 模块初始化（加载）函数
> module_exit(hello_exit);    // 模块卸载函数
> 
> // 模块信息
> MODULE_LICENSE("GPL");       // GPL 开源协议
> MODULE_AUTHOR("Your Name");  // 作者
> MODULE_DESCRIPTION("A simple Hello World kernel module."); // 描述
> 
> ~~~





> #### 概念
>
> - RTOS：实时操作系统，能够在特定的时间范围内保证响应和执行操作，[VxWorks，HC/OS，eCos，Nucleus，QNX，OSBK](实时系统概述.md))
>- Soc：芯片级系统，将一个完整的系统集成在一块芯片上，它通常包含 CPU（处理器核心）、内存（如 RAM、ROM、Flash）、外设接口（如 USB、I2C、SPI、UART）、通信模块（如 Wi-Fi、蓝牙）和其他专用功能模块
> - MCU：微控器，集成微处理器（CPU）、内存（RAM 和 ROM）、I/O 控制器（GPIO、UART、SPI、I2C 等）和定时器的单芯片微型计算机。MCU 通常用来执行简单的控制任务
>- MPU：MPU 是一种只包含中央处理器（CPU）的处理单元，不包括 RAM、ROM 或外设接口。MPU 需要配合外部存储器和外设工作，因此它更适合复杂的应用
> - HAL库：（Hardware Abstraction Layer）库是硬件抽象层库，用于嵌入式系统开发中，HAL 库的目的是为硬件平台提供一层抽象，开发人员通过 HAL 接口与硬件交互。开发者无需直接操作寄存器，降低了开发难度
>- BootLoader：引导加载程序，用于初始化硬件，加载操作系统内核，故障恢复，安全启动
> - BPS：每秒钟传输的比特数（每秒传输位数），衡量数据通信速率的单位。影响 BPS 的因素，线缆质量，噪声干扰，硬件能力，协议开销
>- 通信方式
>   1. 通信模式：单工，半双工，全双工
>  2. 传输方式：同步（发送和接收双方通过共享的时钟信号来协调数据的发送和接收），异步（数据的发送和接收是通过特定的标志（如起始位和停止位）来区分），串行（所有的数据比特在一个信号通道上依次发送），并行（数据以多个比特同时传输）

#### Linux编译及文件系统制作

> 

#### U-Boot烧录

> 烧入

#### 电气接口及通信方式

> UART：异步串行通信，接收方需要设置相同的波特率
>
> - TXD：数据发送
> - RXD：数据接收
> - GND：地线引脚。为UART通信提供参考地电位（所有信号线完成电路闭合，减少干扰）
> - RTS：请求发送引脚。发送方通过RTS信号通知接收方它准备好发送数据
> - CTS：清除发送引脚。接收方通过CTS信号通知发送方它准备好接收数据
> - DTR：数据终端就绪引脚。发送方通过DTR信号通知接收方它已经准备好进行通信（用于设备初始化和状态指示）
> - RI：振铃指示引脚。用于表示有来电信号
> - DCD：数据载波检测引脚。用于指示调制解调器检测到有效的载波信号（在调制解调器应用中使用，表示数据载波信号已经检测到）

#### 示波器
